# 前端面试准备

## HTML

**HTML**的**文档源**：由**协议**、**主机名**（域名）和**端口**决定。

`window.onffline`离线时触发,`window.ononline`返回在线状态时触发。

### 存储

#### localStorage和sessionStorage

**区别**：存储的**有效期**和**作用域**不同。

**localStorage**：浏览器内的**永久性存储**，除非用户或者Web应用删除；**同源**的可以共享读取或覆盖，非同源的无法读取或覆盖。

**sessionStorage**：存储在标签页或窗口内，一旦永久关闭就被删除。**同源且同窗口**可以共享，非同源或同源但非同窗口的不能共享。

**API**

```javascript
localStorage.setItem('x',1)
localStorage.getItem('x')
```

**存储事件**

当localStorage或sessionStorage中的数据真正变化时，会在其他对该数据可见的窗口对象上触发存储事件（进行改变的窗口不会触发）

#### cookie

HTTP协议的一种拓展；在Web浏览器和Web服务器之间传输。服务端可以操作客户端的cookie；

**有效期**：持续在Web浏览器会话期间，与sessionStorage不同，不会局限在窗口中，而与浏览器进程相关。可以设置**max-age**(s)来控制。

**作用域**：通过**文档源**和**文档路径**来确定，与创建它的Web页面有关，并对该页面可见。设置path和domain属性控制。

**HttpOnly**: 告知浏览器不允许通过脚本document.cookie去更改这个值，同样这个值在document.cookie中也不可见。但在http请求张仍然会携带这个cookie。注意这个值虽然在脚本中不可获取，但仍然在浏览器安装目录中以文件形式存在。这项设置通常在服务器端设置。

**secure**：设置为true时，只能通过HTTPS等安全协议来传输。

```javascript
document.cookie="version=aaa;path=path;domain=domain;secure;max-age=64000"
```

**局限性**：旧浏览器保存不能超过300个，Web服务器不能超过20个，每个cookie不能超过4KB；

#### cookie vs session

cookie 存储于浏览器端，而 session 存储于服务端。

cookie 的安全性相比于 session 较弱，别人可以分析存放在本地的COOKIE并进行COOKIE欺骗，考虑到安全应当使用session。

session 会在一定时间内保存在服务器上。当访问增多时，会占用服务器的资源，所以考虑到服务器性能方面，可以使用cookie。

单个cookie 保存数据不能超过4k，且很多浏览器限制一个站点最多保存20个cookie； session 默认大小一般是1024k。

#### HTML5离线缓存

**应用程序缓存**与一般的浏览器缓存不同，：不会随着浏览器缓存清除而被清除，也不会被最近访问的数据替代。

通过manifest文件进行控制：在文件中定义那些需要缓存的文件；支持 manifest 的浏览器，会将按照 manifest 文件的规则，将资源保存在本地，从而在没有网络链接的情况下也能访问页面。

**流程**

当我们第一次正确配置 app cache 后，当我们再次访问该应用时，浏览器会首先检查 manifest 文件是否有变动，如果有变动就会把相应的变更进行资源下载，同时改变浏览器里面的 app cache，如果没有变动，就会直接把 app cache 的资源返回。

**API**

通过`window.applicationCache`相关api来控制。

```javascript
window.applicationCache.update(); // 强制更新缓存
window.applicationCache.swapCache();// 弃用老的缓存，但不会重新载入已载入的html文件，图片等资源
```

**如何更新缓存**

更新 manifest 文件  / 通过 javascript 操作 / 清除浏览器缓存

**优点**

可以离线运行、可以减少资源请求、可以更新资源

**缺点**

+ 更新的资源，需要二次刷新才会被页面采用；
+ 不支持增量更新，只有manifest发生变化，所有资源全部重新下载一次，资源变化时不会更新
+ 缺乏足够容错机制，当清单中任意资源文件出现加载异常，都会导致整个manifest策略运行异常

### CSS



### JS

### React

### 浏览器

### 测试

### 安全

### 例题

