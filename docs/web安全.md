## Web 安全

### 对称加密

双方通过同一个密钥进行加密和解密。
缺点：传递密钥的安全问题

### 非对称加密

A 根据算法产生一个公钥和对应的私钥，并分发公钥。B 使用公钥加密数据，A 通过私钥进行解密数据。

### xss 攻击

- 方式：

  通过 html 标签注入，篡改网页，插入恶意的脚本。前端可能没有经过严格的校验直接就进到数据库，数据库又通过前端程序又回显到浏览器。

- 目的：拿到用户的 cookie 来获取敏感信息。

- 防御：对用户输入过滤校验，进行转码或解码。

```
攻击者发现XSS漏洞——构造代码——发送给受害人——受害人打开——攻击者获取受害人的cookie——完成攻击
```

### CSRF 攻击

- 方式：

  **攻击者盗用了用户的身份，以用户的名义发送了恶意请求**。比如这个制造攻击的网站使用一张图片，而这张图片的链接却是可以修改银行转账或账单支付的， 这时候攻击者就以用户的名义进行了对应操作。

- 防御：

  - 使用验证码
  - 检查 HTTP 头部 referer(告诉服务器我是从哪个页面链接过来的)
  - 使用 token 验证，在HTTP请求中以参数的形式加入一个随机产生的token，并在服务器端建立一个拦截器来验证这个token，如果请求中没有token或者token内容不正确，则认为可能是CSRF攻击而拒绝该请求。
  - http 头自定义属性并验证

- 过程：
  1.  浏览并登陆信任网站 A，产生 session
  2.  验证通过，用户浏览器产生 cookie
  3.  用户在没有登出 A 的情况下，访问危险网站 B
  4.  B 要求访问 A，发出 request
  5.  浏览器根据 B 的要求带着 cookie 访问 A

```
攻击者发现CSRF漏洞——构造代码——发送给受害人——受害人打开——受害人执行代码——完成攻击
```

### 网络劫持

- 方式：

  通过一些代理服务器，或者 wifi 等有中间件的网络请求，进行劫持，不法分子通过这种方式获取到用户的信息。

- 防御：采用 https 加密
